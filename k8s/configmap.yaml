# =============================================================================
# Kubernetes ConfigMap
# Non-sensitive configuration for Auth System service
# =============================================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: elano-auth-config
  namespace: elano
  labels:
    app: elano-auth-service
    component: backend
    managed-by: kubectl
data:
  # Application Configuration
  NODE_ENV: "production"
  PORT: "5000"
  HOST: "0.0.0.0"
  LOG_LEVEL: "info"
  
  # Google OAuth Configuration
  GOOGLE_CALLBACK_URL: "https://api.elano.cloud/api/auth/google/callback"
  
  # Rate Limiting Configuration
  TRUSTED_IPS: "127.0.0.1,10.0.0.1"
  RATE_LIMIT_WINDOW_MS: "900000"           # 15 minutes
  RATE_LIMIT_MAX_REQUESTS: "100"
  SENSITIVE_OP_WINDOW_MS: "3600000"        # 1 hour
  SENSITIVE_OP_MAX_REQUESTS: "50"
  
  # Frontend URL
  FRONTEND_URL: "https://elano.cloud"
  
  # Default Plan Configuration
  DEFAULT_FREE_PLAN_ID: "default_free_plan"
  
  # Service URLs (for inter-service communication)
  AUTH_SERVICE_URL: "http://elano-auth-service.elano.svc.cluster.local:5000"
  GOVERNANCE_SERVICE_URL: "http://elano-governance-service.elano.svc.cluster.local:5004"
  ORG_REGISTRATION_SERVICE_URL: "http://elano-org-registration-service.elano.svc.cluster.local:5003"
  
  # Health Check Configuration
  HEALTH_CHECK_PATH: "/health"
  HEALTH_CHECK_INTERVAL: "30"
  
  # Monitoring Configuration
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"
  METRICS_PATH: "/metrics"
